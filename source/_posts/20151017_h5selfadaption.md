title: 使用rem实现fullpage专题页自适应布局
---

貌似从去年开始，这种效果的专题页就火的不要不要的，几乎每个移动互联网的团队都开始涉足这块东西，甚至已经有不少公司以此作为卖点，提供制作这种专题页的工具，让非技术人员也可以快速制作出一款不错的产品。因为其实这些专题页的精髓是内容，在技术上主要是依托css3的动画。

但是工具的效果当然不能像手工制作的那么灵活了。所以还是有不少项目是需要手工来制作的。

废话不多说了，fullpage项目在技术方面的核心问题有下面几点：
- 幻灯式的全屏滚动效果
- 各种css3动画
- 移动端的各尺寸屏幕的自适应

其中前两点一般网上都有足够好用的工具插件，直接用就行了。
本文着重讲最难的第三点。


## 幻灯式全屏滚动的效果

这个交互效果一般有下面几种原理的实现方案：
1. 把内容页都置于一个大容器中，当页面初始化完毕后，根据屏幕的高度（宽度），将内容页按顺序排好，然后当滑动页面时，就将大容器进行移动，即可实现全屏滚动的效果。
2. 这种方法近似于第一种方法，不同之处在于，它是在初始化时将内容都移动到屏幕底部（即移动） ，然后每次滚动时，单独滚动一页内容。
可见实现原理的大同小异的。网上有很多实用的插件比如swiper.js ， fullpage.js等。我自己主要是用自己写的

## 移动端的自适应方案

这种项目与普通移动端项目的区别就在于，必须把所有内容都展示在屏幕的显示范围内。
那么难题就来了，目前项目组的美术出的设计稿750 x 1334 的（即iphone6的分辨率）
实践下来发现最难解决的问题就是怎么把大分辨率的设计稿放到小屏幕的手机上。
首先想到的就是将内容进行缩放啦。

我前几个项目用的主要是绝对定位加百分比定宽。但是发现这样很吃力，而且效果不好。因为百分比得出的宽度是自适应了，但是高度不行，因此还有针对5s和4专门做媒体查询来定高。累。

后来有同事提出对整个页面用zoom进行缩放，发现页面自适应效果确实好了，但是有些情况下，字体的大小还是有问题。

再后来，也是目前我比较推荐的一种做法，就是使用rem了。其实网上对rem的介绍文章也已经很多了，但是介绍实战的内容貌似不多。这货被大家所推崇的理由在于，它可以让原本相对静态的css文件有了动态的特性，相当于是css中的一个全局变量，于是我们就可以用它来实现『一处改变，多处受益』的效果了。
网上很多人给的demo里都会将html的font-size设置为10px，于是1rem就等于10px了。然而这个是很蛋疼的，因为在webkit内核浏览器中，font-size最小只能为12px，所以你会郁闷的发现，为什么你的1rem变成了12px了。
所以不建议设置为10px。有的人建议设置为100px，这样元素的宽高就好算了，比如我要一个宽度100px的div，那width:1rem。
然而在实际项目组，我们拿到的设计稿是750px的，而我们布局时是以375px为基准来布局的（即按375X667的物理分辨率来布局），这就大大加重前端计算压力……

所以一个更优的解决办法是：把字体设置为合适的值，当我们要做一个设计稿上400px宽的元素时，只需要定width:4rem就可以了。

那么怎么取得这个合适的值呢？
以iphone6为例，我们想要的值是50px，它浏览器的默认根字体大小是16px，屏幕宽度是375px；
50 / 16 = 3.125;
那么font-size:312.5% 就可以啦。

那么，其它分辨率的手机相对来说就是(屏幕宽度 / 375) * 312.5 % 了；

这个方法可以很好的适配到320px宽的iphone5（s）和360px的主流安卓机上。
但是要注意的是，iphone4（s）比5s短了一截，因此如果仅按宽度来适配往往会造成高度不够。
所以，当屏幕宽高比小于1.5时（480 / 320），我们就考虑用屏幕高度比来做适配以保证所有内容都能显示。
但是，往往我们的项目是跑在微信朋友圈的，朋友圈天生占据了64px的高度，所以还要减去64px……

那么，上面这些内容用js来实现如下：

```javascript
$('html').css('font-size', $(window).height()/$(window).width()<1.5 ? ($(window).height()/603*312.5+'%') : ($(window).width()/375*312.5+'%'));
```

当页面加载完后执行上述代码即可完成自适应啦。